plugins {
    id 'org.jetbrains.kotlin.jvm' version '1.9.23'
}

repositories {
    mavenCentral()
}

dependencies {
    // UniFFI requires JNA for native calls
    implementation "net.java.dev.jna:jna:5.12.0"

    // Kotlin test + JUnit 4
    testImplementation "org.jetbrains.kotlin:kotlin-test"
    testImplementation "junit:junit:4.13.2"
}

java {
    sourceCompatibility = JavaVersion.VERSION_17
    targetCompatibility = JavaVersion.VERSION_17
}

// Ensure tests can find the compiled shared library
// The build_kotlin.sh copies libbedrock.dylib/.so into test_android/libs/

test {
    useJUnit()
    systemProperty "jna.library.path", "$projectDir/libs"
} 